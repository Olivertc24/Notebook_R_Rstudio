---
title: "Módulo 3: Estructuras de Datos Esenciales"
subtitle: "Organización eficiente de la información"
author: "Prof. Oliver Triveño"
format: 
  revealjs:
    theme: simple
    transition: slide
    slide-number: true
    logo: "https://upload.wikimedia.org/wikipedia/commons/thumb/1/1b/R_logo.svg/724px-R_logo.svg.png"
    footer: "Estructuras de Datos en R"
    echo: true
    code-line-numbers: true
    highlight-style: github
editor: visual
lang: es
---

## Mapa de Estructuras

En R, las estructuras se organizan según su dimensionalidad y contenido:

| | Homogéneo <br><small>(Solo un tipo de dato)</small> | Heterogéneo <br><small>(Varios tipos de datos)</small> |
|:---:|:---:|:---:|
| **1 Dimensión** | **Vector** | **Lista** |
| **2 Dimensiones** | **Matriz** | **Data Frame** |
| **n Dimensiones** | **Array** | |

---

## 1. Vectores: Profundización

Ya sabemos crearlos con `c()`. Ahora veamos la **indexación** y **vectorización**.

### Indexación (Slicing)
Recuerda: **R empieza a contar desde 1**.

```{r}
#| label: indexacion-vector

v <- c(10, 20, 30, 40, 50)

v[1]          # Primer elemento
v[c(1, 3)]    # Elementos 1 y 3
v[-2]         # Todos MENOS el 2
```

---

### Operaciones Vectorizadas

Esta es la magia de R. No necesitas bucles (loops) para operar elemento por elemento.

```{r}
#| label: vectorizacion

precios <- c(100, 200, 300)
impuesto <- 1.21  # IVA

# Operación aplicada a TODO el vector simultáneamente
precios_finales <- precios * impuesto
precios_finales
```

---

## 2. Matrices y Arrays

Estructuras de 2 dimensiones (filas y columnas) que solo contienen datos del mismo tipo (usualmente numéricos).

```{r}
#| label: matrices

# Crear una matriz de 3x3 llenada por filas
M <- matrix(1:9, nrow = 3, byrow = TRUE)
M
```

---

Acceso a elementos [fila, columna]

```{r}
M[1, 2]  # Fila 1, Columna 2
M[ , 3]  # Toda la columna 3
```

Álgebra Lineal Básica
Como científicos de datos, distinguimos entre multiplicación elemento a elemento y matricial.

:::: {.columns}

::: {.column width="50%"} 
Elemento a Elemento (*)
```{r}
M * 2
```
:::

::: {.column width="50%"} 
Producto Matricial (%*%)

```{r}
# Multiplicación de matrices
M %*% M
```
:::

::::

---

## 3. Factores (Categorías)

Esenciales para estadística y gráficos. Almacenan datos categóricos y definen sus niveles.

```{r}
#| label: factores

sexo <- c("M", "F", "F", "M")
factor_sexo <- factor(sexo)

factor_sexo
levels(factor_sexo) # R identifica los grupos únicos
```

::: {.callout-warning} 
Internamente, R guarda los factores como enteros (1, 2, 3...) asociados a etiquetas. Cuidado al convertirlos a numéricos. 
:::

---

## 4. Listas
Son el contenedor más flexible. Pueden guardar vectores, matrices, data frames e incluso otras listas.

```{r}
#| label: listas

mi_mochila <- list(
  propietario = "Oliver",
  numeros = c(1, 5, 10),
  matriz_data = matrix(1:4, nrow=2)
)

# Acceder con el signo de dólar $
mi_mochila$propietario
```

---

## 5. Data Frames

La estructura reina del Análisis de Datos. Filas = Observaciones, Columnas = Variables.

```{r}
#| label: dataframes

# Crear un DF manualmente
empleados <- data.frame(
  id = 1:3,
  nombre = c("Ana", "Luis", "Sol"),
  salario = c(2500, 3000, 2800),
  activo = c(TRUE, TRUE, FALSE)
)

head(empleados)
```

---

Manipulación básica de Data Frames

```{r}
#| label: df-ops

# Acceder a una columna (devuelve un vector)
empleados$salario

# Calcular promedio salarial
mean(empleados$salario)

# Filtrar (Indexación lógica)
empleados[empleados$salario > 2600, ]
```

---

::: {.r-fit-text} 
¿Preguntas? 
:::